<html><head>
<meta charset="utf-8"/>
<link crossorigin="" href="https://fonts.gstatic.com/" rel="preconnect"/>
<link as="style" href="https://fonts.googleapis.com/css2?display=swap&amp;family=Inter%3Awght%40400%3B500%3B600%3B700&amp;family=Noto+Sans%3Awght%40400%3B500%3B700%3B900" onload="this.rel='stylesheet'" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet"/>
<title>Stitch Design</title>
<link href="data:image/x-icon;base64," rel="icon" type="image/x-icon"/>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.23/jspdf.plugin.autotable.min.js"></script>
<style type="text/tailwindcss">
      :root {
        --primary: #0b80ee;
        --secondary: #f0f2f5;
        --text-primary: #111518;
        --text-secondary: #60768a;
      }
      body {
        font-family: 'Inter', 'Noto Sans', sans-serif;
      }
    </style>
</head>
<body>
<div class="relative flex size-full min-h-screen flex-col bg-gray-50 group/design-root overflow-x-hidden">
<div class="layout-container flex h-full grow flex-col">
<header class="flex items-center justify-between whitespace-nowrap border-b border-solid border-gray-200 bg-white px-6 py-3">
<div class="flex items-center gap-4 text-text-primary">
<div class="size-8 text-[var(--primary)]">
<svg fill="none" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
<path clip-rule="evenodd" d="M24 4H42V17.3333V30.6667H24V44H6V30.6667V17.3333H24V4Z" fill="currentColor" fill-rule="evenodd"></path>
</svg>
</div>
<h1 class="text-text-primary text-xl font-semibold leading-tight">Service Quotes</h1>
</div>
<nav class="hidden items-center gap-8 lg:flex">
<a class="text-sm font-medium text-text-primary hover:text-[var(--primary)]" href="#">Dashboard</a>
<a class="text-sm font-medium text-text-primary hover:text-[var(--primary)]" href="#">Quotes</a>
<a class="text-sm font-medium text-text-primary hover:text-[var(--primary)]" href="#">Customers</a>
<a class="text-sm font-medium text-text-primary hover:text-[var(--primary)]" href="#">Units</a>
<a class="text-sm font-medium text-text-primary hover:text-[var(--primary)]" href="#">Parts</a>
<a class="text-sm font-medium text-text-primary hover:text-[var(--primary)]" href="#">Settings</a>
</nav>
<div class="flex items-center gap-4">
<div class="bg-center bg-no-repeat aspect-square bg-cover rounded-full size-10" style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuCAIUH3xVYOaxZ0LylGeKn_Z7ChKdknub1FIyp2YWJHK8mBgk92jUUUAjzSPcM6Glhle5-dnQs0XGYSEWcjAX3cnDeitu5pd3txnAU1ghu4mjVph5kgzBWIzZqzmyWai4yhtG3zCh_3t3oQRO3C7WtfW08L3zWcUrlQuGCP2U7wapvxHWlXPTrOhdZ641xuGmXBnHQzkwlycPj4sK3I_sRH2A6VuqizPqF66pzcZYSJHyPZjNlcU9I4zgDEQZ5pp7hKfXDcqF7MvoE");'></div>
<button class="lg:hidden">
<span class="material-symbols-outlined"> menu </span>
</button>
</div>
</header>
<main class="flex-1 px-4 py-8 md:px-6">
<div class="mx-auto grid max-w-7xl grid-cols-1 gap-8 lg:grid-cols-3">
<div class="lg:col-span-2">
<div class="mb-6">
<div class="flex items-center gap-2 text-sm text-text-secondary">
<a class="hover:text-[var(--primary)]" href="#">Quotes</a>
<span>/</span>
<a class="hover:text-[var(--primary)]" href="#">Quote #12345</a>
<span>/</span>
<span class="font-medium text-text-primary">Export Preview</span>
</div>
</div>
<div class="mb-8">
<h2 class="text-3xl font-bold text-text-primary">Export Preview</h2>
<p class="mt-2 text-text-secondary">Customize the display of pricing information before exporting.</p>
</div>
<div class="rounded-lg border border-gray-200 bg-white shadow-sm" id="quote-preview">
<div class="p-6">
<div class="flex justify-between items-start">
<div>
<h3 class="text-xl font-semibold text-text-primary">Quote #12345</h3>
<p class="mt-1 text-sm text-text-secondary">Date: 2024-01-15</p>
</div>
<div class="text-right">
<p class="font-semibold text-text-primary">Main Branch</p>
<p class="text-sm text-text-secondary">123 Industrial Way, Anytown, USA</p>
</div>
</div>
<div class="mt-6 grid grid-cols-1 md:grid-cols-2 gap-6">
<div>
<h4 class="text-lg font-semibold text-text-primary">Customer Information</h4>
<div class="mt-2 space-y-1 text-sm text-text-secondary">
<p><span class="font-medium text-text-primary">Name:</span> Sarah Johnson</p>
<p><span class="font-medium text-text-primary">Company:</span> Johnson Construction</p>
<p><span class="font-medium text-text-primary">Email:</span> sarah.j@johnsonconstr.com</p>
<p><span class="font-medium text-text-primary">Phone:</span> (123) 456-7890</p>
</div>
</div>
<div>
<h4 class="text-lg font-semibold text-text-primary">Unit Information</h4>
<div class="mt-2 space-y-1 text-sm text-text-secondary">
<p><span class="font-medium text-text-primary">Unit:</span> Excavator</p>
<p><span class="font-medium text-text-primary">Model:</span> CAT 336</p>
<p><span class="font-medium text-text-primary">Serial #:</span> XYZ123456</p>
<p><span class="font-medium text-text-primary">Hours:</span> 4,500</p>
</div>
</div>
</div>
<div class="mt-6">
<h4 class="text-lg font-semibold text-text-primary">Description of Work</h4>
<p class="mt-2 text-text-secondary">
                      Comprehensive maintenance and repair services for the excavator, including engine overhaul, hydraulic system repairs, and replacement of worn-out parts. The work
                      ensures optimal performance and extends the lifespan of the equipment.
                    </p>
</div>
</div>
<div class="border-t border-gray-200">
<div class="overflow-x-auto">
<table class="w-full text-left" id="quote-table">
<thead class="bg-gray-50">
<tr>
<th class="px-6 py-3 text-xs font-semibold uppercase tracking-wider text-text-secondary">Item</th>
<th class="px-6 py-3 text-xs font-semibold uppercase tracking-wider text-text-secondary">Description</th>
<th class="px-6 py-3 text-right text-xs font-semibold uppercase tracking-wider text-text-secondary">Quantity</th>
<th class="px-6 py-3 text-right text-xs font-semibold uppercase tracking-wider text-text-secondary">Unit Price</th>
<th class="px-6 py-3 text-right text-xs font-semibold uppercase tracking-wider text-text-secondary">Total</th>
</tr>
</thead>
<tbody class="divide-y divide-gray-200 bg-white">
<tr>
<td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-text-primary">Engine Overhaul</td>
<td class="px-6 py-4 whitespace-nowrap text-sm text-text-secondary">Complete engine overhaul with new pistons, rings, and bearings.</td>
<td class="px-6 py-4 whitespace-nowrap text-right text-sm text-text-secondary">1</td>
<td class="px-6 py-4 whitespace-nowrap text-right text-sm text-text-secondary">$5,000.00</td>
<td class="px-6 py-4 whitespace-nowrap text-right text-sm text-text-secondary">$5,000.00</td>
</tr>
<tr>
<td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-text-primary">Hydraulic System Repair</td>
<td class="px-6 py-4 whitespace-nowrap text-sm text-text-secondary">Repair and replacement of hydraulic hoses and seals.</td>
<td class="px-6 py-4 whitespace-nowrap text-right text-sm text-text-secondary">1</td>
<td class="px-6 py-4 whitespace-nowrap text-right text-sm text-text-secondary">$2,500.00</td>
<td class="px-6 py-4 whitespace-nowrap text-right text-sm text-text-secondary">$2,500.00</td>
</tr>
<tr>
<td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-text-primary">Parts Replacement</td>
<td class="px-6 py-4 whitespace-nowrap text-sm text-text-secondary">Replacement of worn-out parts including filters and belts.</td>
<td class="px-6 py-4 whitespace-nowrap text-right text-sm text-text-secondary">1</td>
<td class="px-6 py-4 whitespace-nowrap text-right text-sm text-text-secondary">$1,500.00</td>
<td class="px-6 py-4 whitespace-nowrap text-right text-sm text-text-secondary">$1,500.00</td>
</tr>
<tr>
<td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-text-primary">Labor</td>
<td class="px-6 py-4 whitespace-nowrap text-sm text-text-secondary">Skilled technician labor for all repair and maintenance tasks.</td>
<td class="px-6 py-4 whitespace-nowrap text-right text-sm text-text-secondary">40 hours</td>
<td class="px-6 py-4 whitespace-nowrap text-right text-sm text-text-secondary">$100.00/hour</td>
<td class="px-6 py-4 whitespace-nowrap text-right text-sm text-text-secondary">$4,000.00</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="border-t border-gray-200 bg-gray-50 px-6 py-4 flex justify-between items-end">
<div class="flex items-center gap-4">
<img alt="QR Code for Quote Approval" class="w-32 h-32" src="https://lh3.googleusercontent.com/aida-public/AB6AXuCE-4At60OdXh3jWLXFyyITk45e36haD8-rCqwzWTGYlVakpbPp8kJLyEPrWflGWMwCCy0ltxXAZMe4-Q-s6BYFXKDLJIpPeuDyLU_xM3ir6Os_QzsQ82RdGskkpYFOm8xHcdRKqw1yO-9YPD96I7b1swDpu4g4bZs_FDY5UnvOPhl3zsNISIhu4MA-gmvajC7FyGvXLY34TWc0xnRb7W3NyoyTvofm91ZljYINyTTvIXf-6uyPxkezlGWQNGzFCq9ZmwAMld9apq0"/>
<div class="text-sm text-text-secondary">
<p class="font-semibold text-text-primary">Scan to Approve</p>
<p>Initiates an email to:</p>
<p class="font-medium text-text-primary">mainbranch.approvals@example.com</p>
</div>
</div>
<div class="text-right">
<p class="text-sm font-medium text-text-secondary">Subtotal: <span class="ml-2 font-semibold text-text-primary">$13,000.00</span></p>
<p class="text-sm font-medium text-text-secondary">Tax (8%): <span class="ml-2 font-semibold text-text-primary">$1,040.00</span></p>
<p class="mt-2 text-lg font-bold text-text-primary">Total: <span class="ml-2 text-[var(--primary)]">$14,040.00</span></p>
</div>
</div>
</div>
</div>
<aside class="space-y-8">
<div class="rounded-lg border border-gray-200 bg-white p-6 shadow-sm">
<h3 class="text-lg font-semibold text-text-primary">Display Options</h3>
<div class="mt-4 space-y-4">
<label class="flex items-center gap-3 rounded-lg border border-gray-200 p-4 has-[:checked]:border-[var(--primary)] has-[:checked]:bg-blue-50">
<input checked="" class="h-4 w-4 border-gray-300 text-[var(--primary)] focus:ring-[var(--primary)]" name="display_option" type="radio"/>
<span class="text-sm font-medium text-text-primary">Show Single Total</span>
</label>
<label class="flex items-center gap-3 rounded-lg border border-gray-200 p-4 has-[:checked]:border-[var(--primary)] has-[:checked]:bg-blue-50">
<input class="h-4 w-4 border-gray-300 text-[var(--primary)] focus:ring-[var(--primary)]" name="display_option" type="radio"/>
<span class="text-sm font-medium text-text-primary">Show Breakdown by Category</span>
</label>
<div class="border-t border-gray-200 pt-4">
<h4 class="text-base font-semibold text-text-primary">Included Items</h4>
<div class="mt-3 space-y-3">
<label class="flex items-center gap-3">
<input checked="" class="h-4 w-4 rounded border-gray-300 text-[var(--primary)] focus:ring-[var(--primary)]" type="checkbox"/>
<span class="text-sm text-text-primary">Show Parts</span>
</label>
<label class="flex items-center gap-3">
<input checked="" class="h-4 w-4 rounded border-gray-300 text-[var(--primary)] focus:ring-[var(--primary)]" type="checkbox"/>
<span class="text-sm text-text-primary">Show Labor</span>
</label>
</div>
</div>
</div>
</div>
<div class="rounded-lg border border-gray-200 bg-white p-6 shadow-sm">
<h3 class="text-lg font-semibold text-text-primary">Export Formats</h3>
<div class="mt-4 space-y-3">
<label class="flex items-center gap-3">
<input checked="" class="h-4 w-4 rounded border-gray-300 text-[var(--primary)] focus:ring-[var(--primary)]" id="check-pdf" type="checkbox"/>
<span class="text-sm text-text-primary">PDF</span>
</label>
<label class="flex items-center gap-3">
<input class="h-4 w-4 rounded border-gray-300 text-[var(--primary)] focus:ring-[var(--primary)]" id="check-csv" type="checkbox"/>
<span class="text-sm text-text-primary">CSV</span>
</label>
<label class="flex items-center gap-3">
<input class="h-4 w-4 rounded border-gray-300 text-[var(--primary)] focus:ring-[var(--primary)]" id="check-excel" type="checkbox"/>
<span class="text-sm text-text-primary">Excel</span>
</label>
</div>
</div>
<div class="flex flex-col gap-4">
<button class="flex w-full items-center justify-center gap-2 rounded-full bg-[var(--primary)] px-4 py-3 text-sm font-semibold text-white shadow-sm hover:bg-blue-700" id="export-btn">
<span class="material-symbols-outlined"> download </span>
                  Export Quote
                </button>
<button class="flex w-full items-center justify-center gap-2 rounded-full border border-gray-300 bg-white px-4 py-3 text-sm font-semibold text-text-primary shadow-sm hover:bg-gray-100" id="back-btn">
<span class="material-symbols-outlined"> edit </span>
                  Back to Editing
                </button>
</div>
</aside>
</div>
</main>
</div>
</div>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // --- EXPORT FUNCTIONS ---

        function exportToPdf() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();

            const quotePreview = document.getElementById('quote-preview');
            const quoteTitle = quotePreview.querySelector('h3').textContent;
            const quoteDate = quotePreview.querySelector('p.mt-1').textContent;

            doc.setFontSize(18);
            doc.text(quoteTitle, 14, 22);
            doc.setFontSize(11);
            doc.setTextColor(100);
            doc.text(quoteDate, 14, 29);

            doc.autoTable({
                html: '#quote-table',
                startY: 40,
                theme: 'grid',
                headStyles: {
                    fillColor: [11, 128, 238] // var(--primary)
                },
            });

            doc.save(`${quoteTitle.replace(/[^a-z0-9]/gi, '_').toLowerCase()}.pdf`);
        }

        function getTableDataForCsv() {
            const table = document.getElementById('quote-table');
            const data = [];
            const headers = [];
            table.querySelectorAll('thead th').forEach(th => {
                headers.push(`"${th.textContent.trim()}"`);
            });
            data.push(headers.join(','));

            table.querySelectorAll('tbody tr').forEach(tr => {
                const row = [];
                tr.querySelectorAll('td').forEach(td => {
                    row.push(`"${td.textContent.trim().replace(/"/g, '""')}"`);
                });
                data.push(row.join(','));
            });
            return data.join('\r\n');
        }

        function exportToCsv() {
            const csvContent = getTableDataForCsv();
            const quoteTitle = document.querySelector('#quote-preview h3').textContent;
            const filename = `${quoteTitle.replace(/[^a-z0-9]/gi, '_').toLowerCase()}.csv`;

            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement("a");
            if (link.download !== undefined) {
                const url = URL.createObjectURL(blob);
                link.setAttribute("href", url);
                link.setAttribute("download", filename);
                link.style.visibility = 'hidden';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            }
        }

        // --- EVENT LISTENERS ---

        document.getElementById('export-btn').addEventListener('click', () => {
            if (document.getElementById('check-pdf').checked) {
                exportToPdf();
            }
            if (document.getElementById('check-csv').checked) {
                exportToCsv();
            }
            if (document.getElementById('check-excel').checked) {
                alert('Excel export is not yet implemented. For now, you can open the CSV file in Excel.');
            }
        });

        document.getElementById('back-btn').addEventListener('click', () => {
            window.history.back();
        });
    });
</script>
</body></html>